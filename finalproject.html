<!DOCTYPE html>
<html lang="en">

<title>PHYS S-12: Introduction to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="./style.css" rel="stylesheet">

<nav class="navbar navbar-expand-sm navbar-light bg-light">
  <div style="align-items: center; justify-content:center;" class="container-fluid">
    <h3 class="nav-title"> PHYS S-12: Intro to Digital Fabrication</h3>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="./index.html">Home</a></h4>
      <h4><a class="nav-link" href="./finalproject.html">Final Project</a></h4>
      <h4><a class="nav-link" href="./about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>



<xmp style="display:none;">




<h1>Final Project Proposal</h1>

<img src="https://img.freepik.com/free-photo/houseplant-background-plant-lovers_53876-130004.jpg?w=1060&t=st=1687395507~exp=1687396107~hmac=20ff538528442e205d2cfc374777d22fa18f6befb7e74ea389f8a8efff284db0" alt="plant banner">

Many people do not buy plants because they think that they are too difficult to maintain. While this is true for some plants, most can thrive with just a little bit of extra care. For my final project, I would like to create a Plant Supply Dispensing Machine. This machine will hopefully help people new to gardening feel less scared to try as they will not have to do as much work. This project will most likely use a soil pH sensor, a sensor to detect water levels in the soil, three dispensers, three connectable dispensing cups, two types of liquid fertilizer, water, and a potted plant. One dispenser would contain water, one dispenser would contain liquid nitrogen fertilizer, and one dispenser would contain liquid potassium fertilizer. First, both of the sensors(water and pH) would measure their respective levels. Based on the given measurements, the dispensers (with holes to release liquid) would release a certain amount of water or liquid fertilizer into the dispensing cups. The user can then pour the content of the dispensing cups onto the soil surrounding the plant.

<h2><u>Proposed Supplies</u></h2>
<ul>
  <li>Plant pH Sensor</li>
  <li>3 Dispensers (most likely 3D printed)</li>
  <li>3 Dispensing Cups (most likely 3D printed)</li>
  <li>Liquid Nitrogen Fertilizer</li>
  <li>Liquid Potassium Fertilizer</li>
  <li>Potted Plant (possibly dying)</li>
  <li>Microcontrollers</li>
</ul> 


<h2>Functionality</h2>
<img src="https://img.freepik.com/free-photo/houseplant-background-plant-lovers_53876-130004.jpg?w=1060&t=st=1687395507~exp=1687396107~hmac=20ff538528442e205d2cfc374777d22fa18f6befb7e74ea389f8a8efff284db0" alt="plant banner">
<p>
  For this to be successful, I would have to figure out a way to determine how much water or fertilizers would be released. This would require me to do some research on the correct amount to add for plants. Then I would have to create a program that would cause the dispensers (most likely controlled by microcontrollers) to release the correct amount of liquid. I have been taking inspiration from 3D printed gumball dispensers on the internet. Some of these are shown and linked below. I have also taken inspiration for my dispenser cups on the internet and these are also shown and linked below. The dispenser cups are most likely going to be a mix of the shape of a very long, skinny tray with high ends and the shape of a normal watering can. One of my ideas for this is to create a series of mini watering cans that can be linked together but also be taken apart.
</p>

 <h3>Dispensers</h3>
      <ol>
        <li><img src="https://media.printables.com/media/prints/152922/images/1437577_34c32b4b-1783-4a23-b496-e7887887ff09/thumbs/inside/1600x1200/jpeg/f9b27e3c-351b-4902-8ab0-a959770eee67.webp" alt="Dispener 1" width="533 px" height="400 px">
          <p><a href="https://www.printables.com/model/152922-dry-food-carousel-dispenser-print-in-place">Dry Food Carousel Dispenser</a></p></li>
        <li><img src="https://www.hubs.com/talk/uploads/db5060/original/2X/b/bd6b7e23c8138ec726f2b066cdf6e8cf05bd80ab.jpg" alt="Dispenser 2"><p><a href="https://www.hubs.com/talk/t/3d-printed-candy-dispenser/2157">3D Printed Candy Dispenser</a>
        </p></li>
        <li><img src="https://files.cults3d.com/uploaders/16151871/illustration-file/c265f6fb-499b-411e-ae8f-33f87eace8ee/02-explotada-final.jpg" width="480" height="480" alt="Dispenser 3">
        <p><a href="https://cults3d.com/en/3d-model/home/drop-e-cereal-dispenser">Drop-E/Cereal Dispenser</a></p></li>
      </ol> 

 <h3>Dispensing Cups</h3>
    <ol>
      <li><img src="https://cdn.thingiverse.com/renders/54/35/1a/9d/df/69ce8222b24204e3f6f9a67d12b6507e_preview_featured.jpg" alt="Dispensing Cup 1">
        <p><a href="https://www.thingiverse.com/thing:3024203">Classic Watering Can - For Desktop Succulents</a></p></li>
      <li><img src="https://cdn.thingiverse.com/assets/e1/ee/4f/2b/95/featured_preview_2b6a9c89-f139-4ff3-a286-e034d7d65bac.jpg" alt="Dispensing Cup 2">
        <p><a href="https://www.thingiverse.com/thing:5543788">
Mini Watering Can</a></p></li>
      <li><img src="https://files.cults3d.com/uploaders/15531483/illustration-file/866ac890-cfc8-4fed-a307-c14eb60862bf/03.jpg" alt="Dispensing Cup 3" width="480 px" height="480 px">
        <p><a href="https://cults3d.com/en/3d-model/home/watering-can-gazzaladra-2">Watering Can</a></p></li>
    </ol> 
<br></br>
<h2>Weekly Updates</h2>
<h3>Week of July 10</h3>
<p>
  The current idea for how the machine will operate is that when you push the button on the vending machine, the liquid it holds will be released. You will use the cups to measure how much liquid is released. A computer program will tell you how much liquid you need to release. Then, you will pour the liquid in the cup into a watering pot and then pour that onto the plant. This week I worked on my cups for the liquid. I used a measuring cup that was designed by somebody on Thingiverse because my attempt to design one myself was not successful. However, I designed the watering pot myself in Fusion360. Both items began printing on July 10 (See Week 5 Page for Details).
</p>

<h4>Bill of Materials</h4>
<style>
table {
  border: 1 px solid #dddddd;
  text-align: left;
  padding: 8px;
}

td,th{
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>

<table>
  <tr>
    <th>Item</th>
    <th>Quantity</th>
    <th>Status</th>
  </tr>

  <tr>
    <th>3D Printed Vending Machine</th>
    <th>3</th>
    <th>Designing</th>
  </tr>

  <tr>
    <th>Measuring Cup</th>
    <th>1</th>
    <th>Printing</th>
  </tr>

  <tr>
    <th>Watering Pot</th>
    <th>1</th>
    <th>Printing</th>
  </tr>

  <tr>
    <th>Plant</th>
    <th>1</th>
    <th>Need to Obtain</th>
  </tr>

  <tr>
    <th>Arduino</th>
    <th>1</th>
    <th>Currently Have</th>
  </tr>
  <tr>
    <th>Water Sensor</th>
    <th>1</th>
    <th>Need to Obtain</th>
  </tr>
  <tr>
    <th>pH Sensor</th>
    <th>1</th>
    <th>Need to Obtain</th>
  </tr>
  <tr>
    <th>Wires</th>
    <th>Unknown</th>
    <th>Need to Obtain</th>
  </tr>
  <tr>
    <th>Motor</th>
    <th>1</th>
    <th>Currently Have</th>
  </tr>
</table>

<h4>Timeline</h4>
<h5>Week of July 10</h5>
<ul>
  <li>Finalize Watering Pot/Measuring Cup Design</li>
  <li>Print Cups Out</li>
  <li>Design Vending Machines</li>
</ul>

<h5>Week of July 17</h5>
<ul>
  <li>Finalize Vending Machine Design</li>
  <li>Print Vending Machine Out</li>
  <li>Design Inner Mechanism</li>
</ul>

<h5>Week of July 24</h5>
<ul>
  <li>Put Everything Together</li>
  <li>Test & Make Adjustments</li>
</ul>

<h5>Week of July 31</h5>
<ul>
  <li>Buy Plant</li>
  <li>Make Final Adjustments & Present</li>
</ul>

<h4>Project Goals</h4>
<ul>
  <li>Be able to dispense accurate amounts of the 3 liquids</li>
  <li>Correctly use a pH sensor</li>
  <li>Correctly use the water sensor</li>
  <li>Have a functioning conveyor belt</li>
  <li>Make the mechanism somewhat easy to transport</li>
  <li>Correctly functioning mechanism to dispense liquid</li>
  <li>Make the task of taking care of a plant less daunting</li>
</ul>

<h3>Week of July 17</h3>

<h4>Syringe Mechanism</h4>
<h5>Design</h5>
<p>
  One of the things I did this week was work on designing the syringe mechanism. Some parts of the prototype were made in clay, then modeled in Fusion360, and lastly printed out on the 3D printer.
</p>

<h6>Gear</h6>
<p>This movement of this part is controlled by the stepper motor and is used to move the L piece.</p>
<ol>
  <li>
    Use the sketch function to create a gear and its teeth - need to adjust center hole
    <img src="https://lh6.googleusercontent.com/Ss_c0_yCf7faOUm9Fzjtdwwy47WarW1rPuJkzKAj7xa7YnFrmgI3DE4LgwGdPhXkQXp2_wsN70k_mbuh9g1S_KqMg7QLm1RE1M6-KsgTfq3TblT0sKfs3D64KVliuZipxLw2hF2suKjklYURKZvWrNk" alt="Gear" width="640" height="360">
  </li>
<!--   <li>

    <img src="url" alt="alternatetext">
  </li>
  <li>

    <img src="url" alt="alternatetext">
  </li>
    <li>

    <img src="url" alt="alternatetext">
  </li> -->
</ol>

<h6>L Piece</h6>
<p>This part holds onto and moves the plunger of the syringe.</p>
<ol>
  <li>
    Create a new sketch and use the line and rectangle tool to create an L shape.
    <img src="https://lh4.googleusercontent.com/8qDKN61pqUC8EN6NpymayJjXqzstAsCyu4v2ZJrjzTczgb95fkz7I8w1RLv6KqSCgYwmph7yF31_tXn1prSW11Z_80GgwB8L2Jqt9kXFMC6wbafaDQvZV9_dtZ201Fj1apnsYK9XflrjLPcvvQkH8xc" alt="alternatetext" width="640" height="360">
  </li>
  <li>
    Create another rectangle
    <br></br>
    <img src="https://lh5.googleusercontent.com/1nQwfK5CrG7Y9cEIFXFao766F5GveFARSRBPBAkXD3aYAqZnLWJG-CDKIkncXoVDSdgsmqQ-DX8FfJMR2ivhQ4Y2cZZ9mKZvCwMH38McwOXDeNk13KnQBZSoSjAaWV1j3S6a3hpJ3HEa2yZvcitGsKY" alt="alternatetext" width="640" height="360">
  </li>
  <li>
    Extrude the smaller piece by 3 mm and the larger L piece by 4.8 mm
    <img src="https://lh5.googleusercontent.com/f5pq7F_2JHh0lVsqxlXeXc8IF05rXX3BxAAj73tGi4J8Lo0leC1kxzFDrxvS0HePYjnvvblU5U5ZsgakN-avCcj9vw68wSvfedQBgF96WHsDI_0i_b1B5lrzOYWIygh_0iUzbGgASZW2l-YUnPO263Q" alt="alternatetext" width="640" height="360">
  </li>
  <li>
    Move the smaller rectangles on top of the larger one
    <img src="https://lh6.googleusercontent.com/Wg9IYTCa1Kz-dlZ-oQHQ-FH3MK9Hb_fLO8jdFTtc2GZprZbOZZqQj4u7VZdi7BWZJtd8H6wOHqoVtePg4dq66hIBITk7w8AK4H26CHxD6tR9AkSSMISo0GKSDyCELTBPgmOTy6_E6--qadCkQ3O_j0M" alt="alternatetext" width="640" height="360">
  </li>
  <li>
    Extrude the gear tooth by 4.8 mm
    <br></br>
    <img src="https://lh5.googleusercontent.com/1edCxPtmnoaRARqowcpvJk_woqkJK_y8rsO-jaOKTPLiuwtVSsJ7CQjf-CrrbF3HK0q2_W4n_9FNKFbvnSPzEn54PsVR4UgHvhIipjFKzBekGn-aEnouJ4YFVNRQh4LYcSns8pdWXfYDqxwUMWb7IlM" alt="alternatetext" width="640" height="360">
  </li>
  <li>
    Move the tooth to the end of the L piece
    <br></br>
    <img src="https://lh4.googleusercontent.com/DHLqDo5g1dFGM2qeDaImuSAPjbB4GaPRubxRbu0JqJxNnjze38OtfRthR1IKNU7onBquRMLNUx0QczUeHrnYmpkhlbNPR3GA-yAdKuzzrGCCjJ7amWzDMdhwPY8MMqdRSp2AMfSLj3Fgc3LKWnm45qU" alt="alternatetext" width="640" height="360">
  </li>
  <li>
    Copy and paste the gear 8 times and move them apart 5.869 mm
    <img src="https://lh5.googleusercontent.com/UV5_py2LA4_7Ya0OeYFpA6gKfb0RHpqnWXx6B58lNQxXyO_errQk4dMIXH23LHA550vtozXiqBnpRXp53WcI7QoSUJEB0zUtusX84RFg4KfJde-AlTBSv26MCbWNX-AlPq0GO0eBm-rio5uQzbY1UYs" alt="alternatetext" width="640" height="360">
  </li>
  <li>
    Use the combine tool to combine all of the bodies into one
  </li>
</ol>

<h6>Supports</h6>
<p>These parts are used to guide the direction of the movement of the L piece.</p>
<ol>
  <li>
    Use the rectangle tool to make 3 rectangles. One is 41 mm by 10 mm, the other one is 65mm by 10 mm, and the last one is 10 cm by 30 mm
    <br></br>
    <img src="https://lh4.googleusercontent.com/jv4f1-eu_XgZqikKBiKKQoE5L2SrZsNswzsncbX3J1qnOI67fIbsE2ax8mskfdhKtDc3HMUc0zL0bX87OrcYNMmfHE4Ob0Mh1Ty0XymJdRpHZohN0KGLYVBk8dFn7Ry0pxIkHpI2kBd6kqbiOF_ORLY" alt="" width="640" height="360">
  </li>
  <li>
    Copy and paste the L piece
    <br></br>
    <img src="https://lh5.googleusercontent.com/yBwUDwZpgcHct6w-ubyho3isbq6w31415tOPN7dKkt7LcCn8n1NLvJtNDYHzRrf-PvgApUxa3CTc5XEH7jLqyFe8d0z5TFaKtNDujyIZHErqzyknXDoHK-fg7bbp9zUhGP2hRVmdcm1NSlGHRTTgIxM" alt="" width="640" height="360">
  </li>
  <li>
    Extrude the pieces 4.5 mm
    <br></br>
    <img src="https://lh3.googleusercontent.com/fN-Sa5YCoG9vsQV9Ufb6JPYG5KX8gJGMq0VaFcAc_ITH8h1rhwYCknjxJq6SU2PDTcfH_KihJkvzH7kex5amM1iiznW9EXlp5BVDZfGqU7Uxs32jj1j2U4R-z8hADQ_LXWdnxmQ1rMcBIySifHUHUD4" alt="" width="640" height="360">
  </li>

<h6>Syringe Securing Piece</h6>
<p>This part makes sure the syringe stays in place.</p>
<ol>
  <li>
    Create 2 large rectangles using the rectangle tool
    <img src="https://lh6.googleusercontent.com/t7_YHkYqOc4ceaFRxSl-aYknHrQXtVTrmJKcEkl-SOWPOQTmDrdASJ_VESl0b5V_5oIa3pp1dmYrpjgJpQHYgc4MB-421idnqbeUNhjnZik_w3Yy_e2Kh8QAesjOdW9wFfFNkoBQGFBvS5Jgv7WO_tk" alt="" width="640" height="360">
  </li>
  <li>
    Extrude the larger rectangle by 15.5 mm and the smaller one by 7.1 mm
    <img src="https://lh5.googleusercontent.com/Cltd8ntgDqyhnJHcwiqh9FfEMS7B40oQAfzyqY4q1jE1WRcy4dIoitfgxF8FEoSl9LVA_4cz1cYebflBp9BvTKDbBVcUmgHpjPSFvBmoSySf-UoStrtPpM1L9FtDS9QIDAZ6_pkGn0EJN3vtuXftD60" alt="" width="640" height="360">
  </li>
  <li>
    Duplicate the smaller rectangle and arrange them as shown
    <img src="https://lh3.googleusercontent.com/qaUA7XNeDFLd7IIqFoZN2ZHpR3jmTM_FMKKfXmLDbLcUvGnzQtJvPYgZvWYXrVukMBnTsSRwNLEEtHq2s6sValc1dwMmiAvHK9z8e4gFq_8SRnRhYt7PPqhQSZm7aQYdgI9_uSq8yR3cPinKSrJkOO8" alt="" width="640" height="360">
  </li>
  <li>
    Use the combine function under modify and then combine all 3 shapes
    <img src="https://lh5.googleusercontent.com/L-kUiJUeMLXe7dADpDg_Bky-YcL99s09e-zPGjTNpvc3dcPx-pFLT_nIIhPWO10RfsLqNy3ISEIaBPyd0f6A5GFBgP7yLncJsUeY9F3Na9iX-BzIvxXRMiQckVB3JzcD6Dq_CjnoyxFd3X-Uha9bS2I" alt="" width="640" height="360">
  </li>
</ol>

<h5>Printing Process</h5>
The printing process was fairly straightforward. First, I printed out each of the small parts. Then, I cut out a panel 180 cm by 150 cm out of cardboard. Then I drew grid lines on it 1 cm apart so that I could figure out where each part needs to go. Then I modeled that in Fusion360 and printed out the parts. Each took roughly 5.5 hours to print. The syringe support was not correctly placed in the initial print, so it was broken off and glued back on at a later time. The syringe supports were removed from the comprehensive design and also attached at a later time.
<img src="https://lh6.googleusercontent.com/aCZhKoW9fmZ1K3g6kYF82AVSg9CqEb9n9etVCMfR-XyQJQX2NcDKBVIF3GEDoXRHkmV2lISLmnJPXol3fAd2LJWulPJ68eMf9nO40RwIUBVSaUgeU6FOulzWtWSn3uMEyU6NioDFZKIPep1JQbBFJqw" alt="Prototype Panel">
<img src="https://lh4.googleusercontent.com/5CdfxFLBUzBF66e1T9WYqW3kzs8GWb1MMFe8jlx11ADrmyMxVE143GUB4bK-n-FX1FK3J5c73sNgccLjV47EZOrS2Jo50ivX6phkSJoBKB0BJK7JKmJDV7uJMgoqBrD0kYV8pCZHG4mk05_ygaToLYA" alt="3D Panel">

<br></br>
<h4>Support</h4>
<h5>Stand</h5>
The main board is propped up by 2 support stands. They are made out of two triangles and two squares each. The sketch was then saved as a DXF and sent to the laser printer which cut the shapes out of wood. When prototyping, some of the wooden pieces were attached with double-sided tape, but that was eventually taken off and replaced with wood glue.
<img src="https://lh4.googleusercontent.com/AByNjPLEC-9zF10le-wMHE1xCXo6vQ0ELx4-3aKOysxX0uQK-8UP6aYkwJCL9J9REEGlhaeOCqGhL9MKRd8vnBGhyZSb8RWfXa-_dvGbMLoL8XuYRfKQ2k8bTqJuf6Vd0hLg2ifPRCAB2ERw-Pqu9sg" alt="Side Panels Fusion" width="640" height="360">
<img src="https://lh3.googleusercontent.com/yDqyRusGysWc4wCdNOogCZdXEfYWvqAPsetyYQZKSxo11LU08xbCmLvNYtE-MtLMLpqKEttfzuc6plvE4Xq4VJDVoioXpvk6fC8CysYznGXgK4-jCgvS1vuoop3kCRFEgnekOf7Xxx-c5X9Fx-BUeqY" alt="Pieces">
<img src="https://lh6.googleusercontent.com/xmfC8VkjjhBMcmp29X-B6bikei9tBNS0e1XM0Q-fSiMSNGCBJnihGWqlHrhwT5_Vxfh8Y9BmA2mlbBv20cpccsAUabwaV0TdD-ZXHUNic6j7qOq4pI8DeFWndQKNclX_53bd4DDvYlaJOmZ_XtGH4_w" alt="">


<h5>Board</h5>
The board was made out of 3mm mood. First, I designed the shape in Fusion 360. This was done using the line tool and rectangle tool. Once all of the shapes were drawn out and I was satisfied with my design, I saved it as a DXF, then used the laser cutter to cut out my design. I then used sandpaper to sand down any rough edges. The 3D-printed panels and the board were attached to each other via M3 screws and nuts.
<br></br>
<img src="https://lh4.googleusercontent.com/Di5UqgkG4f008RTuMYUxuAqBS-brnIP2FCPXIirpD2_5Kf7BBY4pHzNLo37ujN9DWRk_CZoPu2sCEB0TInXKvb4ejW0CVMs4baRCwwmdaQqgUIb4MeBS9v3gfBvFPX_U15CnsLFK5xg27O_GwdPLJlQ" alt="Support Board Fusion" width="640" height="360">
<img src="https://lh6.googleusercontent.com/jBeevInQVLtIB1SG6eK_W9-YzoeoMTABkza5HMelCNGMJ3d5wNPTObwdCeBGjUqih8PMmorrgVJ1CcqF7BLul8MYmQwgDi-NVaMTfLBy3-RvNfDBpMdMr6cmizdx-qA8u3PQZBnMdGLMFe2_b_r3o8c" alt="Prototype Panel">
<img src="https://lh6.googleusercontent.com/GQilCwTfCpRWJM2oxidAdXqE2NEWa_D8EwvATTfRdgnBvnS-k3jsN3C8LIeGozR6OqeWtXfONDZ-UaGQq3LdIeo8_DKIfy4xYliUmS1P9aLkSvQ7CssymxaOjtGOhlXmC7ZrxmKd7I5Iis6NL8T_gsc" alt="Final Board">

<h5>Side Panels</h5>
Each side panel was drawn in Fusion360 using the rectangle tool. I then saved each shape as a DXF, sent them to the laser cutter, and printed them out. The shorter side panel turned out to be a little too long, so I just used the Japanese Pull Saw to get rid of the excess. Lastly, I attached them to the main board using wood glue.
<img src="https://lh6.googleusercontent.com/Cq9xyd6kkzMepWjj-T-ELx_RmhkY2YornGx2S95_ZFA8fW_f6lUojO3vWWzIXyYBjIIKYEe6484452Gx39I9ejpSLQX-GAWgXQzlMhuKeccz-kLB1uFBSNVkvlqxGBBMl1vHlZXsiZPScruP3XJNTQQ" alt="Side Panel Fusion" width="640" height="360">
<img src="https://lh5.googleusercontent.com/NNI3XA7VrNOEFE23AOt1U9finJUbSmxQ-BA6k09J0w0ur0tUTHePeCXpcHEAZRKHGIAlbLlAA2vtGA31eaWEWdP2gjeA2t_-4lDWyWv0ohAMppPzHfD-wgss4ymVj-Cpm7wyThO_MObGLWrt-36LyPI" alt="Side panels">

<h5>Top Panel</h5>
This top panel was a little bit more difficult to create. I again created a Fusion 360 file. I duplicated the support board panel, except this time I changed around some of the measurements. The middle panel measurements were made to be smaller to ensure that they would fit back into the bigger panel even when attached by hinges. The bottom was also shortened to allow easy access to the syringes. This file was saved as a DXF, cut out of cardboard (prototyping), and then cut out of  3mm wood and attached to the main body with wood glue.
<img src="https://lh4.googleusercontent.com/0p_TM1sIqWL3wuc-0tRmM7OSNovEP4F9FwNkifyc-iX8ORAqZtMKCbc5dV5b5T2LKshwfcznnww2odKJqO03HR2sgsVwVWnd2WQTpyB9bh-zRmpOFNlJBQTDWS95HZfcEzLPWTO1Q3wIUmTxrHDnwl4" alt="Top Panel Fusion" width="640" height="360">
<img src="https://lh4.googleusercontent.com/UrYYcNgPgEwuu3sZNd0DhDlPsJjpsQxG-VpI3gJ7Ja3IfLMsLMb6_jHOrWXT1xoCRLmuQN5z9QLSUTnb6bR4A2gsG484daO7J0YtYbziH5f9DR9iUDQy-rnjvtsQe6Ek3y7XD8VIyW59dxJdyWJB3OQ" alt="">


<h5>Final Panel</h5>
<img src="https://lh4.googleusercontent.com/lTMpl40uWaWMqt18FbpBLZtVFwxhZWkWcqsgwTWLiOXfGfAcbdN8b4FP853UsvZzCL37F-qRx0_mo3FLoRik4gKXUDG4zZR85kn6qHBne64MtdxaSqvmB94jPSXElajaKjuMLRjaEl0cY8QukfrK2fk" alt="Final Panel">

<br></br>
<h4>Firebase</h4>
<h5>Water & pH Sensor</h5>
The water sensor is attached to an ESP32 Xiao. This sensor is a capacitive sensor and was calibrated as part of a former assignment. There is a simple program to give the sensor reading and based on that sensor reading it will tell you how much water needs to be dispensed and how much water is left in the syringe. The pH sensor is also attached to the ESP32 Xiao. This sensor was calibrated using a serial print function and then I wrote a simple program that does the same thing as the water sensor program but with pH.
<br></br>
<img src="https://lh4.googleusercontent.com/XZJu0yR8vYULGSaaeiwvJCzZHzSP8-zcwOpv8dTBhLuGPyhfrjkzsivsJpzieb5Or3NIKvKpSJi5R6412GSGBmiCnFXOOBJlvioOimbPEMJuLFIRn9jTJlmLshxbIP39f-_s9uLAfUL2DQlmXDBOc7U" alt="Water Sensor">
<br></br>
<pre style="border:2px solid #BCBEC0; padding: 10px; font: 14px Monaco; width:70%; background: #f7f7f9;border-radius: 25px;">
  <code>
#include <WiFi.h>
#include <Firebase_ESP_Client.h>

//Provide the token generation process info.
#include "addons/TokenHelper.h"
//Provide the RTDB payload printing info and other helper functions.
#include "addons/RTDBHelper.h"

// Insert your network credentials
#define WIFI_SSID "MAKERSPACE"
#define WIFI_PASSWORD "12345678"

// Insert Firebase project API Key
#define API_KEY "AIzaSyC0GzXUbzYGTMFW7XMus4HhFirm3JAJPvc"

// Insert RTDB URLefine the RTDB URL */
#define DATABASE_URL "https://esp32-stepper-motor-ef58a-default-rtdb.firebaseio.com/"

//Define Firebase Data object
FirebaseData fbdo;

FirebaseAuth auth;
FirebaseConfig config;

int soilPin = A0;

int sensorValue;

unsigned long sendDataPrevMillis = 0;
int count = 0;
bool signupOK = false;

int waterAmount_int;
int kAmount_int;
int nAmount_int;

int amountToDispense;
int amountToDispense_K;
int amountToDispense_N;

int u_ml_left = 10;

int sum = 0;

String waterAmount;
String kAmount;
String nAmount;

int pH_value; 
int pH_Value = A1; 
int d_n_value;
int d_k_value;
int n_ml_left = 10;
int k_ml_left = 10;
String p_syringe;

void setup() {
  Serial.begin(115200);
  pinMode(pH_Value, INPUT); 
  pinMode(soilPin, INPUT);
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  Serial.print("Connecting to Wi-Fi");
  while (WiFi.status() != WL_CONNECTED) {
    Serial.print(".");
    delay(300);
  }
  Serial.println();
  Serial.print("Connected with IP: ");
  Serial.println(WiFi.localIP());
  Serial.println();

  /* Assign the api key (required) */
  config.api_key = API_KEY;

  /* Assign the RTDB URL (required) */
  config.database_url = DATABASE_URL;

  /* Sign up */
  if (Firebase.signUp(&config, &auth, "", "")) {
    Serial.println("ok");
    signupOK = true;
  } else {
    Serial.printf("%s\n", config.signer.signupError.message.c_str());
  }

  /* Assign the callback function for the long running token generation task */
  config.token_status_callback = tokenStatusCallback;  //see addons/TokenHelper.h

  Firebase.begin(&config, &auth);
  Firebase.reconnectWiFi(true);
}

void loop() {
  // put your main code here, to run repeatedly:
  sensorValue = tx_rx(soilPin);

  Firebase.RTDB.setInt(&fbdo, "/water_reading", sensorValue);
  Serial.println(sensorValue);

  checkingLevel(sensorValue);
}

long tx_rx(int analog_pin){         // Function to execute rx_tx algorithm and return a value
                      // that depends on coupling of two electrodes.
                      // Value returned is a long integer.
  int read;
  long int sum;
  int N_samples = 100;    // Number of samples to take.  Larger number slows it down, but reduces scatter.
  int average;

  sum = 0;

  for (int i = 0; i < N_samples; i++){
   read = analogRead(analog_pin);      // Measure response of conductor 2.
   sum += read;                            // Sums up N_samples of these measurements.
 }
  average  = sum/500;
  return average;
}      

long checkingLevel (int water_level){
 // water_level = read the state of the sensor

  if (water_level >= 485) {
    //print to dispense 10 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 10);
    
  }

  else if((485)>water_level>=(474)){
    //print to dispense 9 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 9);
  }

  else if((474) > water_level >= (463)){
    //print to dispense 8 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 8);
  }

  else if((452) > water_level >= (441)){
    //print to dispense 7 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 7);
  }

  else if((441)>water_level >= (430)){
    //print to dispense 6 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 6);
  }

  else if((430)>water_level >= (419)){
    //print to dispense 5 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 5);
  }

  else if((419)>water_level >= (408)){
    //print to dispense 4 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 4);
  }

  else if((408)>water_level >= (397)){
    //print to dispense 3 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 3);
  }

  else if((397)>water_level >= (386)){
    //print to dispense 2 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 2);
  }

  else if((386)>water_level >=(375)){
    //print to dispense 1 ml
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 9);
  }

  else if (water_level< (375)) {
    Firebase.RTDB.setInt(&fbdo, "/d_w_value", 0);
}
  u_ml_left -= Firebase.RTDB.getInt(&fbdo, "/d_w_value");
  Firebase.RTDB.setInt(&fbdo, "/u_ml_left", u_ml_left);
}




long checkingpHLevel (int pH_value){
 // pH_Value = read the state of the sensor
  int pH_Value = analogRead(A1); 
  Serial.println(pH_Value); 
  delay(500); 

  if (pH_Value >= 708) {
    //print to dispense 10 ml
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 6);
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Potassium");
  }

  else if((708)>pH_Value>=(700)){
    //print to dispense 9 ml
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 5);
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Potassium");
  }

  else if((700) > pH_Value >= (692)){
    //print to dispense 8 ml
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 4);
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Potassium");
  }

  else if((692) > pH_Value >= (684)){
    //print to dispense 7 ml
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 3);
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Potassium");
  }

  else if((684)> pH_Value >= (676)){
    //print to dispense 6 ml
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 2);
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Potassium");
  }

  else if((676)> pH_Value >= (668)){
    //print to dispense 5 ml
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 1);
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Potassium");
  }

  else if((668)> pH_Value >= (660)){
    //print to dispense 4 ml
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Neither");
  }

  else if((660)> pH_Value >= (652)){
    //print to dispense 3 ml
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 1);
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Nitrogen");
  }

  else if((652)>pH_Value >= (644)){
    //print to dispense 2 ml
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 2);
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Nitrogen");
  }

  else if((644)>pH_Value >=(636)){
    //print to dispense 1 ml
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 3);
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Nitrogen");
  }

    else if((636)>pH_Value >=(628)){
    //print to dispense 1 ml
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 4);
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Nitrogen");
  }

    else if((628)>pH_Value >=(620)){
    //print to dispense 1 ml
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 5);
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Nitrogen");
  }

    else if((620)>pH_Value >=(612)){
    //print to dispense 1 ml
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 6);
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Nitrogen");
  }

  else if (pH_Value< (612)) {
    Firebase.RTDB.setInt(&fbdo, "/d_n_value", 7);
    Firebase.RTDB.setInt(&fbdo, "/d_k_value", 0);
    Firebase.RTDB.setString(&fbdo, "/p_syringe", "Nitrogen");
}
n_ml_left -= Firebase.RTDB.getInt(&fbdo, "/d_n_value");
Firebase.RTDB.setInt(&fbdo, "/n_ml_left", n_ml_left);
k_ml_left -= Firebase.RTDB.getInt(&fbdo, "/d_k_value");
Firebase.RTDB.setInt(&fbdo, "/k_ml_left", k_ml_left);
}
  </code>
</pre>


<h5>Stepper Motors</h5>
The three motors are attached to an ESP32 Dev. There is a program that connects to Firebase and a GitHub page. Based on the input on that website, the motors are told how much to move and therefore how many mL of liquid needs to come out of the syringe. There is also a button for refill that will take in 10 mL of liquid to completely refill the syringe.
<br></br>
<pre style="border:2px solid #BCBEC0; padding: 10px; font: 14px Monaco; width:70%; background: #f7f7f9;border-radius: 25px;">
  <code>

#if defined(ESP32)
#include <WiFi.h>
#elif defined(ESP8266)
#include <ESP8266WiFi.h>
#endif
#include <Firebase_ESP_Client.h>
#include <Stepper.h>

//Provide the token generation process info.
#include "addons/TokenHelper.h"
//Provide the RTDB payload printing info and other helper functions.
#include "addons/RTDBHelper.h"

// Insert your network credentials
#define WIFI_SSID "MAKERSPACE"
#define WIFI_PASSWORD "12345678"

// Insert Firebase project API Key
#define API_KEY "AIzaSyC0GzXUbzYGTMFW7XMus4HhFirm3JAJPvc"

// Insert RTDB URLefine the RTDB URL */
#define DATABASE_URL "https://esp32-stepper-motor-ef58a-default-rtdb.firebaseio.com/"

//Define Firebase Data object
FirebaseData fbdo;

FirebaseAuth auth;
FirebaseConfig config;

unsigned long sendDataPrevMillis = 0;
int count = 0;
bool signupOK = false;

String buttonState = "";
String buttonStateK = "";
String buttonStateH = "";

int waterAmount_int;
int kAmount_int;
int nAmount_int;

int amountToDispense;
int amountToDispense_K;
int amountToDispense_N;

String waterAmount;
String kAmount;
String nAmount;

const int stepsPerRevolution = 2048;

// Creates an instance of stepper class
// Pins entered in sequence IN1-IN3-IN2-IN4 for proper step sequence
Stepper myStepper = Stepper(stepsPerRevolution, 25, 27, 26, 14);   //nitrogen
Stepper myStepper1 = Stepper(stepsPerRevolution, 21, 19, 22, 23);  //36,38,37,39); //potassium
Stepper myStepper2 = Stepper(stepsPerRevolution, 12, 15, 13, 2);   //water


void setup() {
  Serial.begin(115200);
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  Serial.print("Connecting to Wi-Fi");
  while (WiFi.status() != WL_CONNECTED) {
    Serial.print(".");
    delay(300);
  }
  Serial.println();
  Serial.print("Connected with IP: ");
  Serial.println(WiFi.localIP());
  Serial.println();

  /* Assign the api key (required) */
  config.api_key = API_KEY;

  /* Assign the RTDB URL (required) */
  config.database_url = DATABASE_URL;

  /* Sign up */
  if (Firebase.signUp(&config, &auth, "", "")) {
    Serial.println("ok");
    signupOK = true;
  } else {
    Serial.printf("%s\n", config.signer.signupError.message.c_str());
  }

  /* Assign the callback function for the long running token generation task */
  config.token_status_callback = tokenStatusCallback;  //see addons/TokenHelper.h

  Firebase.begin(&config, &auth);
  Firebase.reconnectWiFi(true);
}

void loop() {
  Firebase.RTDB.getString(&fbdo, "/BUTTON_STATUS");
  buttonState = fbdo.to<String>();

  Firebase.RTDB.getString(&fbdo, "/BUTTON_STATUS_K");
  buttonStateK = fbdo.to<String>();

  Firebase.RTDB.getString(&fbdo, "/BUTTON_STATUS_H");
  buttonStateH = fbdo.to<String>();

  Firebase.RTDB.getString(&fbdo, "/N-AMOUNT");
  nAmount = fbdo.to<String>();
  Serial.println(nAmount);
  nAmount_int = nAmount.toInt();  //Integer value of N amount
  amountToDispense_N = nAmount_int * 160;

  Firebase.RTDB.getString(&fbdo, "/K-AMOUNT");
  kAmount = fbdo.to<String>();
  Serial.println(kAmount);
  kAmount_int = kAmount.toInt();  //Integer value of K amount
  amountToDispense_K = kAmount_int * 160;

  Firebase.RTDB.getString(&fbdo, "/WATER-AMOUNT");
  waterAmount = fbdo.to<String>();
  Serial.println(waterAmount);
  waterAmount_int = waterAmount.toInt();  //Integer value of water amount
  amountToDispense = waterAmount_int * 160;

  // Nitrogen
  if (buttonState == "ON") {
    Serial.println("ON");
    myStepper.setSpeed(5);
    myStepper.step(amountToDispense_N);
    delay(100);
    myStepper.step(0);
    delay(100);
    Firebase.RTDB.setString(&fbdo, "/BUTTON_STATUS", " ");
  } else if (buttonState == "OFF") {
    Serial.println("OFF");
    myStepper.setSpeed(5);
    myStepper.step(-1600);
    delay(100);
    myStepper.step(0);
    delay(100);
    Firebase.RTDB.setString(&fbdo, "/BUTTON_STATUS", " ");
  } else {
    myStepper.step(0);
    delay(100);
  }

  // Potassium
  if (buttonStateK == "ON") {
    Serial.println("ON");
    myStepper1.setSpeed(5);
    myStepper1.step(amountToDispense_K);
    delay(100);
    myStepper1.step(0);
    delay(100);
    Firebase.RTDB.setString(&fbdo, "/BUTTON_STATUS_K", " ");
  } else if (buttonStateK == "OFF") {
    Serial.println("OFF");
    myStepper1.setSpeed(5);
    myStepper1.step(-1600);
    delay(100);
    myStepper1.step(0);
    delay(100);
    Firebase.RTDB.setString(&fbdo, "/BUTTON_STATUS_K", " ");
  } else {
    myStepper1.step(0);
    delay(100);
  }

  // Water
  if (buttonStateH == "ON") {
    Serial.println("ON");
    myStepper2.setSpeed(5);
    myStepper2.step(amountToDispense);
    delay(100);
    myStepper2.step(0);
    delay(100);
    Firebase.RTDB.setString(&fbdo, "/BUTTON_STATUS_H", " ");
  } else if (buttonStateH == "OFF") {
    Serial.println("OFF");
    myStepper2.setSpeed(5);
    myStepper2.step(-1600);
    delay(100);
    myStepper2.step(0);
    delay(100);
    Firebase.RTDB.setString(&fbdo, "/BUTTON_STATUS_H", " ");
  } else {
    myStepper2.step(0);
    delay(100);
  }
}
  </code>
</pre>

<h5>Webpage</h5>
The webpage tells you the sensor reading, how much of each liquid to dispense, and how much is left in each syringe. Additionally, the webpage allows you to tell the motors how much liquid to release and when to refill.
<img src="" alt="Website Screenshot">

</xmp>
</body>

<script src="./strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>